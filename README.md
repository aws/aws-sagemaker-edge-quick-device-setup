| &#9888; **WARNING**: This tool is meant for development/testing use only. We don't recommend the use of this tool for production! &#9888; |
| --- |

# aws-sagemaker-egde-quick-device-setup

This package provides a command line interface to easily onboard device with [SageMaker Edge](https://aws.amazon.com/sagemaker/edge/). Run the cli on the device you would like to provision as it will create all the necessary artifacts on the device.

Jump to:

- [Installation ](#installation)
- [Configuration ](#configuration)
- [Permissions ](#permissions)
- [Basic Commands ](#basic-commands)
- [Sample ](#sample)
- [Getting Help](#getting-help)
- [More Resources](#more-resource)



This README is for aws-sagemaker-edge-quick-device-setup version 0.0.1

Installation
------------

`aws-sagemaker-edge-quick-device-setup` is written in golang. You can also geneate the binary directly from the source using

`go build` 

Optionally there is a build script to generate binaries and shasums for the relevant os/architecture combination


We support out of the the box distributions for known os and architectures. Check out [Releases](https://github.com/aws/aws-sagemaker-edge-quick-device-setup/releases) for latest distributions.


`bash build.sh {os} {arch}`

Configuration
-------------

Before using the cli, you need to configure your AWS credentials. Go to https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html to learn about how to configure aws credentials.


Permissions
-----------

In order to invoke the CLI to create required resources in cloud the user/role must have required permission. You can create/attach a policy containng the following permissions.

```
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "iam:GetRole",
                "iam:AttachRolePolicy",
                "iam:CreatePolicy",
                "iam:PassRole",
                "iam:GetPolicy",
                "iam:CreateRole",
                "iam:ListAttachedRolePolicies",
                "iot:GetPolicy",
                "iot:CreateThing",
                "iot:AttachPolicy",
                "iot:AttachThingPrincipal",
                "iot:DescribeThing",
                "iot:CreatePolicy",
                "iot:CreateThingType",
                "iot:CreateKeysAndCertificate",
                "iot:DescribeThingType",
                "s3:CreateBucket",
                "sagemaker:DescribeDeviceFleet",
                "sagemaker:RegisterDevices",
                "sagemaker:UpdateDevices",
                "sagemaker:CreateDeviceFleet",
                "sagemaker:DescribeDevice"
            ],
            "Resource": "*"
        },
        {
            "Effect": "Allow",
            "Action": "s3:GetObject",
            "Resource": "arn:aws:s3:::sagemaker-edge-release-store-*/*"
        }
    ]
}
```

Basic Commands
--------------

The CLI command has the following structure:

```
   $ aws-sagemaker-edge-quick-device-setup --[options]
```

Following are all the arguments supported by the cli. The important ones 
```
  -accelerator string
        Name of accelerator (optional).
  -account string
        AWS AccountId (required).
  -agentDirectory string
        Local path to store agent (default "./demo-agent")
  -arch string
        Name of device architecture (optional with distribution binary).
  -deviceFleet string
        Name of the device fleet (required).
  -deviceFleetBucket string
        Bucket to store device related data (optional/autogenerated).
  -deviceFleetRole string
        Name of the role for the device fleet (optional/autogenerated).
  -deviceName string
        Name of the device (required).
  -dist
        Print distribution information.
  -iotThingName string
        IOT thing name for the device (optional/autogenerated).
  -iotThingType string
        Iot thing type for the device (optional/autogenerated).
  -os string
        Name of operating system (optional with distribution binary).
  -region string
        AWS Region. (default "us-west-2")
  -s3FolderPrefix string
        S3 prefix to store captured data (optional/autogenerated).
  -version
        Print the version of aws-sagemaker-edge-quick-device-setup
```

To view help documentation, use one of the following:

```
   $ aws-sagemaker-edge-quick-device-setup --help
```

To get the version of the cli:

```
   $ aws-sagemaker-edge-quick-device-setup --version
```

Sample
------

If your device is linux amd64(x86_64). You could use one of the pre built distribution [aws-sagemaker-edge-quick-device-setup-linux-amd64](https://github.com/aws/aws-sagemaker-edge-quick-device-setup/releases/download/v0.0.1/aws-sagemaker-edge-quick-device-setup-linux-amd64) to setup the device. For distributions os and architecture are hardcoded into the binaries.

```
   $ aws-sagemaker-edge-quick-device-setup-linux-amd64 --deviceFleet TestFleet --device TestDevice -account AWS_ACCOUNT_ID
```

Getting Help
------------

The best way to interact with our team is through GitHub. You can [open
an issue](https://github.com/aws/aws-sagemaker-edge-quick-device-setup/issues/new/choose) and
choose from one of our templates for guidance, bug reports, or feature
requests.


Please check for open similar
[issues](https://github.com/aws/aws-sagemaker-edge-quick-device-setup/issues/)before opening
another one.

More Resources
--------------

-  [Changelog](https://github.com/aws/aws-cli/blob/develop/CHANGELOG.rst)
   [Reference](https://docs.aws.amazon.com/cli/latest/reference/)
-  [Amazon Web Services Discussion
   Forums](https://forums.aws.amazon.com/)
-  [AWS Support](https://console.aws.amazon.com/support/home#/)

## Security

See [CONTRIBUTING](CONTRIBUTING.md#security-issue-notifications) for more information.

## License

This project is licensed under the Apache-2.0 License.
